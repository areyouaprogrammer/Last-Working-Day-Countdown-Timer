<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Countdown to Shaurya's Last Day!</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  body {
    margin: 0;
    height: 100vh;
    color: #fff;
    font-family: system-ui, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
  }

 .container {
   width: min(90%, 700px);
   padding: 30px;
   border-radius: 20px;
 
   background: radial-gradient(circle at top, #1e1e2f, #0a0a12);
 }

  h1 {
    opacity: 0.85;
  }

  #timer {
    font-size: clamp(2.5rem, 6vw, 4rem);
    font-weight: 800;
    margin: 20px 0;
  }

  #workdays {
    opacity: 0.85;
    margin-bottom: 15px;
  }

  .progress-wrap {
    width: 100%;
    height: 14px;
    background: rgba(255,255,255,0.15);
    border-radius: 10px;
    overflow: hidden;
    margin: 20px 0;
  }

  .progress {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, #4ade80, #22d3ee);
    transition: width 1s linear;
  }

  #message {
    font-size: 1.3rem;
    margin-top: 20px;
  }

  button {
    margin-top: 25px;
    padding: 12px 20px;
    font-size: 1rem;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    background: #25D366;
    color: #000;
    font-weight: 600;
  }

  /* Final 10 second mode */
  .final {
    background: black;
  }

  .final #timer {
    font-size: clamp(4rem, 12vw, 8rem);
    animation: pulse 1s infinite;
  }

  @keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
  }

  canvas {
    position: fixed;
    inset: 0;
    pointer-events: none;
  }
</style>
</head>

<body>

<div class="container" id="capture">
  <h1>Countdown to Shaurya's Last Day</h1>

  <div id="timer"></div>
  <div id="workdays"></div>

  <div class="progress-wrap">
    <div class="progress" id="progress"></div>
  </div>

  <div id="message"></div>

  <button onclick="shareScreenshot()">ðŸ“¸ Share on WhatsApp</button>
</div>

<canvas id="confetti"></canvas>

<script>
  /* ===== CONFIG ===== */
  const startDate = new Date();

  /* ===== CHANGE DATE HERE================================================= */
  const endDate = new Date("2026-01-29T17:52:00");
  /* ===== CHANGE DATE HERE================================================= */

  /* ===== CONFETTI SETUP ===== */
  const canvas = document.getElementById("confetti");
  const ctx = canvas.getContext("2d");
  const confetti = [];
  let finished = false;

  // Holidays to exclude (YYYY-MM-DD)
  const holidays = [
  "2026-01-26" // Republic Day
  ];


  function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }
  window.addEventListener("resize", resizeCanvas);
  resizeCanvas();

  /* ===== ELEMENTS ===== */
  const timerEl = document.getElementById("timer");
  const messageEl = document.getElementById("message");
  const progressEl = document.getElementById("progress");
  const workdaysEl = document.getElementById("workdays");

  const totalDuration = endDate - startDate;

  function countWorkdays(from, to) {
   let count = 0;
   let d = new Date(from);

   while (d <= to) {
     const day = d.getDay();

     // Format date as YYYY-MM-DD
     const dateStr = d.toISOString().split("T")[0];

     const isWeekend = day === 0 || day === 6;
     const isHoliday = holidays.includes(dateStr);

     if (!isWeekend && !isHoliday) {
       count++;
     }

     d.setDate(d.getDate() + 1);
   }

   return count;
 }


  const countdown = setInterval(() => {
    const now = new Date();
    const distance = endDate - now;

    /* ===== FINAL STATE ===== */
    if (distance <= 0 && !finished) {
      finished = true;
      clearInterval(countdown);

      timerEl.style.display = "none";
      workdaysEl.style.display = "none";
      progressEl.style.width = "100%";
      document.body.classList.remove("final");

      messageEl.textContent = "FREEEEEEDOOOOMMMMMM!!!";
      startConfetti();
      return;
    }

    if (distance <= 0) return;

    /* ===== NORMAL COUNTDOWN ===== */
    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor((distance / (1000 * 60 * 60)) % 24);
    const minutes = Math.floor((distance / (1000 * 60)) % 60);
    const seconds = Math.floor((distance / 1000) % 60);

    timerEl.textContent = `${days}d ${hours}h ${minutes}m ${seconds}s`;

    const elapsed = now - startDate;
    progressEl.style.width =
      Math.min((elapsed / totalDuration) * 100, 100) + "%";

    workdaysEl.textContent =
      `Only ${countWorkdays(now, endDate)} workdays left till ${formatDate(endDate)}`
;

    /* ===== FINAL 10 SECOND MODE ===== */
    if (distance <= 10000 && distance > 0) {
      document.body.classList.add("final");
      timerEl.textContent = Math.ceil(distance / 1000);
      messageEl.textContent = "Final countdown";
    }
  }, 1000);

  /* ===== CONFETTI ===== */
  function startConfetti() {
    for (let i = 0; i < 300; i++) {
      confetti.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height - canvas.height,
        r: Math.random() * 6 + 4,
        d: Math.random() * 0.5 + 0.5,
        color: `hsl(${Math.random() * 360}, 100%, 60%)`
      });
    }
    requestAnimationFrame(drawConfetti);
  }

  function drawConfetti() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    confetti.forEach(p => {
      ctx.beginPath();
      ctx.fillStyle = p.color;
      ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
      ctx.fill();
      p.y += p.d * 10;
    });
    requestAnimationFrame(drawConfetti);
  }

  /* ===== SCREENSHOT + SHARE ===== */
  async function shareScreenshot() {
    const canvasImg = await html2canvas(document.getElementById("capture"));
    const blob = await new Promise(res => canvasImg.toBlob(res));
    const file = new File([blob], "countdown.png", { type: "image/png" });

    if (navigator.canShare && navigator.canShare({ files: [file] })) {
      navigator.share({
        files: [file],
        text: "Countdown to Shaurya's last day ðŸŽ‰"
      });
    } else {
      alert("Sharing not supported on this device.");
    }
  }

 function formatDate(date) {
   return date.toLocaleDateString("en-IN", {
     weekday: "long",
     day: "2-digit",
     month: "long",
     year: "numeric"
   });
 }
</script>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

</body>
</html>